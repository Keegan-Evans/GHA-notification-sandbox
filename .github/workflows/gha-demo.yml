name: this close to me
on: [push]
jobs:
  run_passing:
    name: runs passing test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - name: hello robert
        run: |
          pytest -k test_robert
      - run: echo "üçè This job's status is ${{ job.status }}."
  run_failing:
    name: runs a failing test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: greet michael
        run: |
          pytest -k test_not_robert

name: comment issue on failing
on:
  workflow_run:
    workflows: ["this close to me"]
    types: [completed]
jobs:      
  on_failure:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    steps:
      run: echo "U+1F979, your run failed" 
